#!/usr/bin/env bash

while true
do
    IP="$(curl --connect-timeout 2 "http://178.16.41.83/" 2>/dev/null)"

    if [ -n "$IP" ]
    then
        awesome-client <<< "mynetwidget:set_markup('<span color=\"green\"> ${IP} </span>')"
    else
        awesome-client <<< "mynetwidget:set_markup('<span color=\"red\"> offline </span>')"
    fi
    sleep 3
done
