#!/usr/bin/env bash

set -e

for DIR in "/" "/Archive/"
do
  cd "$HOME/etc/root/References/my/journal$DIR"
  for FILE in "References" "Projects" "Journal" "Calendar"
  do
    rm -f "$FILE.zip"
    root rm "$FILE.zip" || true
    remarkable receivezip "/Journal$DIR$FILE"
    root send "$FILE.zip"
    if [ "$?" != "0" ]
    then
      echo "Error: failed to upload a backup"
      exit 1
    fi
  done
done
